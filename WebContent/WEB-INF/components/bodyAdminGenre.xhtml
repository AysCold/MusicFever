<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
      
    <h:head/>
    <h:body>
        <ui:composition>
	        <p:growl id="msgs" life="4000"/>
	        
	        <div class="content">
				<!--   Napraviti lightbox unos?     -->
				<ul class="navlist clearfix" style="margin-bottom: 10px; display: inline-block;">
					<li><h:link value="Users" outcome="admin"/></li>
					<li class="active"><h:link value="Genres" outcome="admin-genre"/></li>
					<li><h:link value="Events" outcome="admin-event"/></li>
				</ul>
				<h:panelGroup>
					<p:commandButton value="Add Genre" icon="ui-icon-plus" style="float:right" ></p:commandButton>  
				</h:panelGroup>   
	            <h:form id="form">
				    <p:dataTable id="basicDT" var="genre" value="#{genreBean.allGenres}" style="text-align: center">
				        <f:facet name="header">
				            Genres
				        </f:facet>
				        <p:column headerText="Name">
				            <h:outputText value="#{genre.name}" />
				        </p:column>
				        <p:column headerText="Delete">
				            <p:commandLink ajax="false" update="msgs" action="#{genreBean.removeGenre}" value="Delete" styleClass="center-content-anchor">
				            	<f:setPropertyActionListener value="#{genre}" target="#{genreBean.genreDelete}" />
				            </p:commandLink>
				        </p:column>
				        <p:column style="width:60px" headerText="Edit">
<!-- 				             <p:commandButton action="account.html?faces-redirect=true" oncomplete="PF('userDialog').show()" icon="ui-icon-pencil" title="Edit"> -->
<!-- 				                <f:setPropertyActionListener value="#{user}" target="#{userBean.userSelected}" /> -->
<!-- 				            </p:commandButton> -->
				            
				            <div style="display: inline-block">  
					            <p:commandButton onclick="PF('dlg').show();" icon="ui-icon-pencil" title="Edit">
<!-- 					                <f:setPropertyActionListener value="#{user}" target="#{userBean.userSelected}" /> -->
					            </p:commandButton>          
							 
							    <p:dialog header="Edit Genre" widgetVar="dlg" resizable="false">
							    	
							        <h:panelGrid columns="2" cellpadding="4" style="z-index: 1001">
							            <h:outputLabel for="name" value="Name: " />
							            <p:inputText id="name" value="#{genre.name}" required="true" label="name" />
							 
							            <f:facet name="footer">
							                <p:commandButton value="Save" action="#{genreBean.editGenre}" update=":#{p:component('msgs')}"/>
								                <f:setPropertyActionListener value="#{genre}" target="#{genreBean.genre}" />
								            </p:commandButton>
							            </f:facet>  
							        </h:panelGrid>
							    </p:dialog>
							</div>
				        </p:column>
				    </p:dataTable>
			    </h:form>         
	        </div>
        	
        </ui:composition>
    </h:body>
</html>
